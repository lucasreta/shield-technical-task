# 🛡️ Shield API

A battle-tested, full-stack TypeScript backend for secure user and wallet management.

Built with love and:
- **Express.js + TypeScript**
- **PostgreSQL + Prisma**
- **Zod for validation**
- **Jest + Supertest for tests**
- **JWT-based authentication**
- **Swagger-powered API docs**

---

## 📦 Setup

```bash
git clone https://github.com/your-org/shield-api.git
cd shield-api
cp .env.example .env
docker-compose up -d
npx prisma migrate dev
npm install
npm run dev
```

---

## 🚀 Scripts

| Script            | Description                    |
|-------------------|--------------------------------|
| `npm run dev`     | Start server (dev mode)        |
| `npm run test`    | Run all unit + integration tests |
| `npm run test:cov`| Run tests with coverage report |
| `npm run lint`    | Run ESLint                     |

---

## 🧪 Test Coverage

![Coverage](https://img.shields.io/badge/coverage-98%25-brightgreen)

```text
Statements   : 98.36% (full service/controller coverage)
Branches     : 86.66%
Functions    : 100%
Lines        : 98.23%
```

All business logic is covered across service, controller, and middleware layers. Errors and edge cases included.

---

## 🔐 Auth Flow

- `POST /signin` → returns JWT token
- `Authorization: Bearer <token>` required for all wallet routes
- Auth middleware checks ownership and fails silently on mismatch (404)

---

## 📘 API Docs

- Swagger UI: `http://localhost:3000/api-docs`
- Autogenerated from Zod schemas and route annotations

---

## 🧰 Tech Stack

- **Express.js** — API framework
- **Prisma** — DB toolkit
- **Zod** — input validation
- **JWT** — auth tokens
- **ts-node-dev** — dev runtime
- **ts-jest** — test runner
- **swagger-jsdoc** — docs generation

---

## 📁 Folder Structure

```
src/
├── controllers/     # Route handlers
├── services/        # Business logic
├── middleware/      # Auth, error handling, validation
├── validators/      # Zod schemas
├── routes/          # Express routes
├── config/          # Prisma, Swagger
├── utils/           # Shared helpers, errors
```

---

## 🧱 Principles

- ✅ **SOLID structure**
- ✅ **Separation of concerns**
- ✅ **Fully typed**
- ✅ **Test-first mentality**
- ✅ **Security-focused**

---

## 🧃 Made with rage, caffeine, and TypeScript.